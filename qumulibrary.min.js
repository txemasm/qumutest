(function(){function e(){if(window.jQuery){clearInterval(a),i("start tagging");var e,t,n,d={},r={play:"play",pause:"pause",begin:"begin",ended:"complete",milestone_passed:"milestone passed",minutes_watching:"minutes watching",qumu:"qumu",media:"media"},o={bind:" event binded for video: ",push:" event pushed to dataLayer for video: ",bind_push:" event binded and pushed to dataLayer for video: "};function l(e){d[e.guid]=e,d[e.guid].percents=s(e);var i=g(n.duration);d[e.guid].label=d[e.guid].vod?e.guid+" | "+e.title+" | "+i:e.guid+" | "+e.title}function s(e){var i=e.duration,a=.25*i,u=.5*i,t=.75*i,n=i,d={quarter:{value:a,hit:!0},half:{value:u,hit:!0},toQuarter:{value:t,hit:!0},total:{value:n,hit:!0}};return d}function p(e,i){var a={load:r.media+" "+r.begin,play:r.media+" "+r.play,pause:r.media+" "+r.pause,ended:r.media+" "+r.ended,unload:r.media+" "+i+" "+r.minutes_watching,timeupdate:r.media+" "+i+" "+r.milestone_passed};return r.qumu+" "+a[e]}function g(e){var i=e/1e3,a=parseInt(i/3600);a=("0"+a).slice(-2),i%=3600;var u=parseInt(i/60);return u=("0"+u).slice(-2),i%=60,i=i.toFixed(),i=("0"+i).slice(-2),a+":"+u+":"+i}function c(e,i){window.dataLayer.push({event:"videoEvent",videoAction:e,videoLabel:i||n.label})}window.widgets.forEach(function(a){var u=a.api;u.init(function(a){function r(){u.get("kulus",function(e){n=d[e[0].guid]})}a||(u.get("kulus",function(e){n=e[0],l(n)}),u.bind("load",function(){r(),e=p("load"),c(e,t),i("load"+o.bind_push+n.guid)}),u.bind("play",function(){r(),e=p("play"),i("play"+o.bind+n.guid),n.currentTime>500&&(c(e,t),i("play"+o.push+n.guid))}),u.bind("pause",function(){r(),e=p("pause"),i("pause"+o.bind+n.guid);var a=n.duration-n.currentTime;a>500&&(c(e,t),i("pause"+o.push+n.guid))}),u.bind("ended",function(){r(),e=p("ended"),c(e,t),i("ended"+o.bind_push+n.guid)}),u.bind("unload",function(){r();var a=g(n.currentTime);e=p("unload",a),c(e,t),i("unload"+o.bind_push+n.guid)}),u.bind("timeupdate",function(a){r();var u=parseInt(a);n.currentTime=a;var l=d[n.guid].percents;if(n.vod)l.quarter.hit&&u>l.quarter.value&&u<l.half.value&&(l.quarter.hit=!1,e=p("timeupdate","25%"),c(e,t),i("25%"+o.push+n.guid)),l.half.hit&&u>l.half.value&&u<l.toQuarter.value&&(l.half.hit=!1,e=p("timeupdate","50%"),c(e,t),i("50%"+o.push+n.guid)),l.toQuarter.hit&&u>l.toQuarter.value&&u<l.total.value&&(l.toQuarter.hit=!1,e=p("timeupdate","75%"),c(e,t),i("75%"+o.push+n.guid));else{var s=u%6e4;if(u>500&&s<250){var v=g(n.currentTime);e=p("unload",v),c(e,t),i("75%"+o.push+n.guid)}}}))})}),i(d)}else u++,i("jQuery not loaded in page. try: "+u),u>=10&&(clearInterval(a),i("stop qumu tagging"))}function i(e){sessionStorage.getItem("imDebug")&&console.log("%c ðŸŽ¥ Qumu ","background: #0077C8; color: #FFFFFF; font-weight: bold; font-size: 12px; padding: 2px; vertical-align: middle",e)}if(void 0===window.batQumuTracking){var a=setInterval(e,500),u=0;window.batQumuTracking=!0}else i("tracking library loaded")})();