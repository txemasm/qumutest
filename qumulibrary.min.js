(function(){function e(){function e(e){sessionStorage.getItem("imDebug")&&console.log("%c ðŸŽ¥ Qumu: ","background: #0077C8; color: #FFFFFF; font-weight: bold; font-size: 12px; padding: 2px; vertical-align: middle",e)}if(window.jQuery){clearInterval(i),e("start tagging");var u,a,n,d={},r={play:"play",pause:"pause",begin:"begin",ended:"complete",milestone_passed:"milestone passed",minutes_watching:"minutes watching",qumu:"qumu",media:"media"},o={bind:" event binded for video: ",push:" event pushed to dataLayer for video: ",bind_push:" event binded and pushed to dataLayer for video: "};function l(e){d[e.guid]=e,d[e.guid].percents=s(e),d[e.guid].isLiveStream=g();var i=c(n.duration);d[e.guid].label=g()?e.guid+" | "+e.title:e.guid+" | "+e.title+" | "+i}function s(e){var i=e.duration,t=.25*i,u=.5*i,a=.75*i,n=i,d={quarter:{value:t,hit:!0},half:{value:u,hit:!0},toQuarter:{value:a,hit:!0},total:{value:n,hit:!0}};return d}function p(e,i){var t={load:r.media+" "+r.begin,play:r.media+" "+r.play,pause:r.media+" "+r.pause,ended:r.media+" "+r.ended,unload:r.media+" "+i+" "+r.minutes_watching,timeupdate:r.media+" "+i+" "+r.milestone_passed};return r.qumu+" "+t[e]}function g(){return jQuery("div [guid="+n.guid+"]").closest("#live-stream").length>0}function c(e){var i=e/1e3,t=parseInt(i/3600);t=("0"+t).slice(-2),i%=3600;var u=parseInt(i/60);return u=("0"+u).slice(-2),i%=60,i=i.toFixed(),i=("0"+i).slice(-2),t+":"+u+":"+i}function v(e,i){window.dataLayer.push({event:"videoEvent",videoAction:e,videoLabel:i||n.label})}window.widgets.forEach(function(i){var t=i.api;t.init(function(i){function r(){t.get("kulus",function(e){n=d[e[0].guid]})}i||(t.get("kulus",function(e){n=e[0],l(n)}),t.bind("load",function(){r(),u=p("load"),v(u,a),e("load"+o.bind_push+n.guid)}),t.bind("play",function(){r(),u=p("play"),e("play"+o.bind+n.guid),n.currentTime>500&&(v(u,a),e("play"+o.push+n.guid))}),t.bind("pause",function(){r(),u=p("pause"),e("pause"+o.bind+n.guid);var i=n.duration-n.currentTime;i>500&&(v(u,a),e("pause"+o.push+n.guid))}),t.bind("ended",function(){r(),u=p("ended"),v(u,a),e("ended"+o.bind_push+n.guid)}),t.bind("unload",function(){r();var i=c(n.currentTime);u=p("unload",i),v(u,a),e("unload"+o.bind_push+n.guid)}),t.bind("timeupdate",function(i){r();var t=parseInt(i);n.currentTime=i;var l=d[n.guid].percents;if(1!=n.isLiveStream)l.quarter.hit&&t>l.quarter.value&&t<l.half.value&&(l.quarter.hit=!1,u=p("timeupdate","25%"),v(u,a),e("25%"+o.push+n.guid)),l.half.hit&&t>l.half.value&&t<l.toQuarter.value&&(l.half.hit=!1,u=p("timeupdate","50%"),v(u,a),e("50%"+o.push+n.guid)),l.toQuarter.hit&&t>l.toQuarter.value&&t<l.total.value&&(l.toQuarter.hit=!1,u=p("timeupdate","75%"),v(u,a),e("75%"+o.push+n.guid));else{var s=t%6e4;if(t>500&&s<250){var g=c(n.currentTime);u=p("unload",g),v(u,a),e("75%"+o.push+n.guid)}}}))})}),e(d)}else t++,e("jQuery not loaded in page. try: "+t),t>=10&&(clearInterval(i),e("stop qumu tagging"))}var i=setInterval(e,500),t=0})();