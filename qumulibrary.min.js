(function(){function e(){if(window.jQuery){clearInterval(t),i("start tagging");var e,u,n,d={},r={play:"play",pause:"pause",begin:"begin",ended:"complete",milestone_passed:"milestone passed",minutes_watching:"minutes watching",qumu:"qumu",media:"media"},o={bind:" event binded for video: ",push:" event pushed to dataLayer for video: ",bind_push:" event binded and pushed to dataLayer for video: "};function l(e){d[e.guid]=e,d[e.guid].percents=s(e),d[e.guid].isLiveStream=g();var i=c(n.duration);d[e.guid].label=g()?e.guid+" | "+e.title:e.guid+" | "+e.title+" | "+i}function s(e){var i=e.duration,t=.25*i,a=.5*i,u=.75*i,n=i,d={quarter:{value:t,hit:!0},half:{value:a,hit:!0},toQuarter:{value:u,hit:!0},total:{value:n,hit:!0}};return d}function p(e,i){var t={load:r.media+" "+r.begin,play:r.media+" "+r.play,pause:r.media+" "+r.pause,ended:r.media+" "+r.ended,unload:r.media+" "+i+" "+r.minutes_watching,timeupdate:r.media+" "+i+" "+r.milestone_passed};return r.qumu+" "+t[e]}function g(){return jQuery("div [guid="+n.guid+"]").closest("#live-stream").length>0}function c(e){var i=e/1e3,t=parseInt(i/3600);t=("0"+t).slice(-2),i%=3600;var a=parseInt(i/60);return a=("0"+a).slice(-2),i%=60,i=i.toFixed(),i=("0"+i).slice(-2),t+":"+a+":"+i}function v(e,i){window.dataLayer.push({event:"videoEvent",videoAction:e,videoLabel:i||n.label})}window.widgets.forEach(function(t){var a=t.api;a.init(function(t){function r(){a.get("kulus",function(e){n=d[e[0].guid]})}t||(a.get("kulus",function(e){n=e[0],l(n)}),a.bind("load",function(){r(),e=p("load"),v(e,u),i("load"+o.bind_push+n.guid)}),a.bind("play",function(){r(),e=p("play"),i("play"+o.bind+n.guid),n.currentTime>500&&(v(e,u),i("play"+o.push+n.guid))}),a.bind("pause",function(){r(),e=p("pause"),i("pause"+o.bind+n.guid);var t=n.duration-n.currentTime;t>500&&(v(e,u),i("pause"+o.push+n.guid))}),a.bind("ended",function(){r(),e=p("ended"),v(e,u),i("ended"+o.bind_push+n.guid)}),a.bind("unload",function(){r();var t=c(n.currentTime);e=p("unload",t),v(e,u),i("unload"+o.bind_push+n.guid)}),a.bind("timeupdate",function(t){r();var a=parseInt(t);n.currentTime=t;var l=d[n.guid].percents;if(1!=n.isLiveStream)l.quarter.hit&&a>l.quarter.value&&a<l.half.value&&(l.quarter.hit=!1,e=p("timeupdate","25%"),v(e,u),i("25%"+o.push+n.guid)),l.half.hit&&a>l.half.value&&a<l.toQuarter.value&&(l.half.hit=!1,e=p("timeupdate","50%"),v(e,u),i("50%"+o.push+n.guid)),l.toQuarter.hit&&a>l.toQuarter.value&&a<l.total.value&&(l.toQuarter.hit=!1,e=p("timeupdate","75%"),v(e,u),i("75%"+o.push+n.guid));else{var s=a%6e4;if(a>500&&s<250){var g=c(n.currentTime);e=p("unload",g),v(e,u),i("75%"+o.push+n.guid)}}}))})}),i(d)}else a++,i("jQuery not loaded in page. try: "+a),a>=10&&(clearInterval(t),i("stop qumu tagging"))}function i(e){sessionStorage.getItem("imDebug")&&console.log("%c ðŸŽ¥ Qumu: ","background: #0077C8; color: #FFFFFF; font-weight: bold; font-size: 12px; padding: 2px; vertical-align: middle",e)}if(void 0===window.batQumuTracking){var t=setInterval(e,500),a=0;window.batQumuTracking=!0}else i("tracking library loaded")})();